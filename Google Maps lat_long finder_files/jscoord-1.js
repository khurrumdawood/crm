function sinSquared(n){return Math.sin(n)*Math.sin(n)}function cosSquared(n){return Math.cos(n)*Math.cos(n)}function tanSquared(n){return Math.tan(n)*Math.tan(n)}function sec(n){return 1/Math.cos(n)}function deg2rad(n){return n*(Math.PI/180)}function rad2deg(n){return n*(180/Math.PI)}function chr(n){var t=n.toString(16);return t.length===1&&(t="0"+t),t="%"+t,decodeURIComponent(t)}function ord(n){for(var r=n.charAt(0),t,i=0;i<256;++i)if(t=i.toString(16),t.length===1&&(t="0"+t),t="%"+t,t=decodeURIComponent(t),t===r)break;return i}var LatLng=function(){function n(n,t){this._lat=n;this._lng=t}return n.prototype.lat=function(){return this._lat},n.prototype.lng=function(){return this._lng},n.prototype.toString=function(){return"("+this.lat+", "+this.lng+")"},n.prototype.distance=function(n){var t=6366.707,i=deg2rad(this.lat()),r=deg2rad(n.lat()),u=deg2rad(this.lng()),f=deg2rad(n.lng()),e=t*Math.cos(u)*Math.sin(i),o=t*Math.sin(u)*Math.sin(i),s=t*Math.cos(i),h=t*Math.cos(f)*Math.sin(r),c=t*Math.sin(f)*Math.sin(r),l=t*Math.cos(r);return Math.sqrt((e-h)*(e-h)+(o-c)*(o-c)+(s-l)*(s-l))},n.prototype.OSGB36ToWGS84=function(){var u=new RefEll(6377563.396,6356256.909),f=u.maj(),tt=u.min(),n=u.ecc(),i=deg2rad(this.lat()),w=deg2rad(this.lng()),t=f/Math.sqrt(1-n*sinSquared(i)),e=0,o=(t+e)*Math.cos(i)*Math.cos(w),s=(t+e)*Math.cos(i)*Math.sin(w),h=((1-n)*t+e)*Math.sin(i),c=-204894e-10,l=deg2rad(4172222e-11),b=deg2rad(6861111e-11),it=deg2rad(.00023391666),a=446.448+o*(1+c)+-l*s+b*h,v=-124.157+it*o+s*(1+c)+-l*h,k=542.06+-b*o+l*s+h*(1+c),y=new RefEll(6378137,6356752.3141),p,g,nt;f=y.maj();tt=y.min();n=y.ecc();var rt=rad2deg(Math.atan(v/a)),d=Math.sqrt(a*a+v*v),r=Math.atan(k/(d*(1-n)));for(p=1;p<10;p++)t=f/Math.sqrt(1-n*sinSquared(r)),g=Math.atan((k+n*t*Math.sin(r))/d),r=g;nt=rad2deg(r);this._lat=nt;this._lng=rt},n.prototype.WGS84ToOSGB36=function(){var u=new RefEll(6378137,6356752.3142),f=u.maj(),tt=u.min(),n=u.ecc(),i=deg2rad(this.lat()),w=deg2rad(this.lng()),t=f/Math.sqrt(1-n*sinSquared(i)),e=0,o=(t+e)*Math.cos(i)*Math.cos(w),s=(t+e)*Math.cos(i)*Math.sin(w),h=((1-n)*t+e)*Math.sin(i),c=204894e-10,l=deg2rad(-4172222e-11),b=deg2rad(-6861111e-11),it=deg2rad(-.00023391666),a=-446.448+o*(1+c)+-l*s+b*h,v=125.157+it*o+s*(1+c)+-l*h,k=-542.06+-b*o+l*s+h*(1+c),y=new RefEll(6377563.396,6356256.909),p,g,nt;f=y.maj();tt=y.min();n=y.ecc();var rt=rad2deg(Math.atan(v/a)),d=Math.sqrt(a*a+v*v),r=Math.atan(k/(d*(1-n)));for(p=1;p<10;p++)t=f/Math.sqrt(1-n*sinSquared(r)),g=Math.atan((k+n*t*Math.sin(r))/d),r=g;nt=rad2deg(r);this._lat=nt;this._lng=rt},n.prototype.toOSRef=function(){var o=new RefEll(6377563.396,6356256.909),s=.9996012717,r=deg2rad(49),u=deg2rad(-2),e=o.maj(),h=o.min(),c=o.ecc(),n=deg2rad(this.lat()),f=deg2rad(this.lng()),a=0,v=0,t=(e-h)/(e+h),i=e*s*Math.pow(1-c*sinSquared(n),-.5),y=e*s*(1-c)*Math.pow(1-c*sinSquared(n),-1.5),l=i/y-1,p=h*s*((1+t+5/4*t*t+5/4*t*t*t)*(n-r)-(3*t+3*t*t+21/8*t*t*t)*Math.sin(n-r)*Math.cos(n+r)+(15/8*t*t+15/8*t*t*t)*Math.sin(2*(n-r))*Math.cos(2*(n+r))-35/24*t*t*t*Math.sin(3*(n-r))*Math.cos(3*(n+r))),w=p+-1e5,b=i/2*Math.sin(n)*Math.cos(n),k=i/24*Math.sin(n)*Math.pow(Math.cos(n),3)*(5-tanSquared(n)+9*l),d=i/720*Math.sin(n)*Math.pow(Math.cos(n),5)*(61-58*tanSquared(n)+Math.pow(Math.tan(n),4)),g=i*Math.cos(n),nt=i/6*Math.pow(Math.cos(n),3)*(i/y-tanSquared(n)),tt=i/120*Math.pow(Math.cos(n),5)*(5-18*tanSquared(n)+Math.pow(Math.tan(n),4)+14*l-58*tanSquared(n)*l);return v=w+b*Math.pow(f-u,2)+k*Math.pow(f-u,4)+d*Math.pow(f-u,6),a=4e5+g*(f-u)+nt*Math.pow(f-u,3)+tt*Math.pow(f-u,5),new OSRef(a,v)},n.prototype.toUTMRef=function(){var h=new RefEll(6378137,6356752.314),c=.9996,l=h.maj(),n=h.ecc(),t=this.lng(),u=this.lat(),i=u*(Math.PI/180),y=t*(Math.PI/180),f=Math.floor((t+180)/6)+1;u>=56&&u<64&&t>=3&&t<12&&(f=32);u>=72&&u<84&&(t>=0&&t<9?f=31:t>=9&&t<21?f=33:t>=21&&t<33?f=35:t>=33&&t<42&&(f=37));var p=(f-1)*6-177,w=p*(Math.PI/180),b=UTMRef.getUTMLatitudeZoneLetter(u),s=n/(1-n),a=l/Math.sqrt(1-n*Math.sin(i)*Math.sin(i)),r=Math.tan(i)*Math.tan(i),o=s*Math.cos(i)*Math.cos(i),e=Math.cos(i)*(y-w),k=l*((1-n/4-3*n*n/64-5*n*n*n/256)*i-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*i)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*i)-35*n*n*n/3072*Math.sin(6*i)),d=c*a*(e+(1-r+o)*Math.pow(e,3)/6+(5-18*r+r*r+72*o-58*s)*Math.pow(e,5)/120)+5e5,v=c*(k+a*Math.tan(i)*(e*e/2+(5-r+9*o+4*o*o)*Math.pow(e,4)/24+(61-58*r+r*r+600*o-330*s)*Math.pow(e,6)/720));return u<0&&(v+=1e7),new UTMRef(d,v,b,f)},n}(),OSRef=function(){function n(n,t){this._easting=n;this._northing=t}return n.prototype.easting=function(){return this._easting},n.prototype.northing=function(){return this._northing},n.prototype.toString=function(){return"("+this.easting+", "+this.northing+")"},n.prototype.getFirstAndSecondLetter=function(){var t=Math.floor(this.easting()/1e5),i=Math.floor(this.northing()/1e5),r,n,u;return r=i<5?t<5?"S":"T":i<10?t<5?"N":"O":"H",n=65+(4-i%5)*5+t%5,n>=73&&n++,u=chr(n),r+u},n.prototype.toSixFigureString=function(){var u=Math.floor(this.easting()/1e5),f=Math.floor(this.northing()/1e5),i=Math.floor((this.easting()-1e5*u)/100),r=Math.floor((this.northing()-1e5*f)/100),t=i.toString(),n;return i<100&&(t="0"+t),i<10&&(t="0"+t),n=r.toString(),r<100&&(n="0"+n),r<10&&(n="0"+n),this.getFirstAndSecondLetter()+t+n},n.prototype.toTenFigureString=function(){var u=Math.floor(this.easting()/1e5),f=Math.floor(this.northing()/1e5),i=Math.floor(this.easting()-1e5*u),r=Math.floor(this.northing()-1e5*f),t=i.toString(),n;return i<1e4&&(t="0"+t),i<1e3&&(t="0"+t),i<100&&(t="0"+t),i<10&&(t="0"+t),n=r.toString(),r<1e4&&(n="0"+n),r<1e3&&(n="0"+n),r<100&&(n="0"+n),r<10&&(n="0"+n),this.getFirstAndSecondLetter()+" "+t+" "+n},n.prototype.toLatLng=function(){var h=new RefEll(6377563.396,6356256.909),o=.9996012717,c=-1e5,u=4e5,r=deg2rad(49),k=deg2rad(-2),e=h.maj(),l=h.min(),a=h.ecc(),p=0,w=0,f=this.easting(),v=this.northing(),t=(e-l)/(e+l),y=0,n=(v-c)/(e*o)+r;do y=l*o*((1+t+5/4*t*t+5/4*t*t*t)*(n-r)-(3*t+3*t*t+21/8*t*t*t)*Math.sin(n-r)*Math.cos(n+r)+(15/8*t*t+15/8*t*t*t)*Math.sin(2*(n-r))*Math.cos(2*(n+r))-35/24*t*t*t*Math.sin(3*(n-r))*Math.cos(3*(n+r))),n+=(v-c-y)/(e*o);while(v-c-y>=.001);var i=e*o*Math.pow(1-a*sinSquared(n),-.5),s=e*o*(1-a)*Math.pow(1-a*sinSquared(n),-1.5),b=i/s-1,d=Math.tan(n)/(2*s*i),g=Math.tan(n)/(24*s*Math.pow(i,3))*(5+3*tanSquared(n)+b-9*tanSquared(n)*b),nt=Math.tan(n)/(720*s*Math.pow(i,5))*(61+90*tanSquared(n)+45*tanSquared(n)*tanSquared(n)),tt=sec(n)/i,it=sec(n)/(6*i*i*i)*(i/s+2*tanSquared(n)),rt=sec(n)/(120*Math.pow(i,5))*(5+28*tanSquared(n)+24*tanSquared(n)*tanSquared(n)),ut=sec(n)/(5040*Math.pow(i,7))*(61+662*tanSquared(n)+1320*tanSquared(n)*tanSquared(n)+720*tanSquared(n)*tanSquared(n)*tanSquared(n));return p=n-d*Math.pow(f-u,2)+g*Math.pow(f-u,4)-nt*Math.pow(f-u,6),w=k+tt*(f-u)-it*Math.pow(f-u,3)+rt*Math.pow(f-u,5)-ut*Math.pow(f-u,7),new LatLng(rad2deg(p),rad2deg(w))},n.fromSixFigureReference=function(t){var r=t.substring(0,1),u=t.substring(1,2),f=parseInt(t.substring(2,5),10)*100,i,e,o;return f+=this.adjustEast(r),i=parseInt(t.substring(5,8),10)*100,i+=this.adjustNorth(r),e=this.getNx(u),o=this.getNy(u),new n(f+e,i+o)},n.fromTenFigureReference=function(t){var r=t.substring(0,1),u=t.substring(1,2),f=parseInt(t.substring(3,8),10),i,e,o;return f+=this.adjustEast(r),i=parseInt(t.substring(9,14),10),i+=this.adjustNorth(r),e=this.getNx(u),o=this.getNy(u),new n(f+e,i+o)},n.fromGridReference=function(n){var t=n.replace(/\s+/g,"");return t.length===8?this.fromSixFigureReference(t):this.fromTenFigureReference(n)},n.charToOrd=function(n){var t=ord(n);return t>73&&t--,t},n.getNy=function(n){var t=this.charToOrd(n);return(4-Math.floor((t-65)/5))*1e5},n.getNx=function(n){var t=this.charToOrd(n);return(t-65)%5*1e5},n.adjustEast=function(n){return n==="O"?5e5:n==="T"?5e5:0},n.adjustNorth=function(n){return n==="H"?1e6:n==="N"||n==="O"?5e5:0},n}(),UTMRef=function(){function n(n,t,i,r){this.easting=n;this.northing=t;this.latZone=i;this.lngZone=r}return n.prototype.toString=function(){return this.lngZone+this.latZone+" "+this.easting+" "+this.northing},n.prototype.toLatLng=function(){var h=new RefEll(6378137,6356752.314),c=.9996,s=h.maj(),n=h.ecc(),e=n/(1-n),f=(1-Math.sqrt(1-n))/(1+Math.sqrt(1-n)),v=this.easting-5e5,l=this.northing,y=this.lngZone,p=this.latZone,w=(y-1)*6-177;ord(p)-ord("N")<0&&(l-=1e7);var b=l/c,o=b/(s*(1-n/4-3*n*n/64-5*Math.pow(n,3)/256)),t=o+(3*f/2-27*Math.pow(f,3)/32)*Math.sin(2*o)+(21*f*f/16-55*Math.pow(f,4)/32)*Math.sin(4*o)+151*Math.pow(f,3)/96*Math.sin(6*o),a=s/Math.sqrt(1-n*Math.sin(t)*Math.sin(t)),r=Math.tan(t)*Math.tan(t),i=e*Math.cos(t)*Math.cos(t),k=s*(1-n)/Math.pow(1-n*Math.sin(t)*Math.sin(t),1.5),u=v/(a*c),d=(t-a*Math.tan(t)/k*(u*u/2-(5+3*r+10*i-4*i*i-9*e)*Math.pow(u,4)/24+(61+90*r+298*i+45*r*r-252*e-3*i*i)*Math.pow(u,6)/720))*(180/Math.PI),g=w+(u-(1+2*r+i)*Math.pow(u,3)/6+(5-2*i+28*r-3*i*i+8*e+24*r*r)*Math.pow(u,5)/120)/Math.cos(t)*(180/Math.PI);return new LatLng(d,g)},n.getUTMLatitudeZoneLetter=function(n){return 84>=n&&n>=72?"X":72>n&&n>=64?"W":64>n&&n>=56?"V":56>n&&n>=48?"U":48>n&&n>=40?"T":40>n&&n>=32?"S":32>n&&n>=24?"R":24>n&&n>=16?"Q":16>n&&n>=8?"P":8>n&&n>=0?"N":0>n&&n>=-8?"M":-8>n&&n>=-16?"L":-16>n&&n>=-24?"K":-24>n&&n>=-32?"J":-32>n&&n>=-40?"H":-40>n&&n>=-48?"G":-48>n&&n>=-56?"F":-56>n&&n>=-64?"E":-64>n&&n>=-72?"D":-72>n&&n>=-80?"C":"Z"},n}(),RefEll=function(){function n(n,t){this._maj=n;this._min=t;this._ecc=(n*n-t*t)/(n*n)}return n.prototype.maj=function(){return this._maj},n.prototype.min=function(){return this._min},n.prototype.ecc=function(){return this._ecc},n}();
//# sourceMappingURL=jscoord-1.2.min.js.map
